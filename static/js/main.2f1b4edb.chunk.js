(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){e.exports=n(342)},340:function(e,t,n){e.exports=n.p+"static/media/template.a88b486e.jpg"},342:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(97),l=n.n(o),c=n(54),u=n(67),i=n(12),s=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),o=t[0],l=t[1],s=Object(a.useState)(""),p=Object(u.a)(s,2),m=p[0],d=p[1],h=Object(a.useState)("none"),g=Object(u.a)(h,2),f=g[0],v=g[1];return r.a.createElement(i.View,{activePanel:"home",popout:"making"===f?r.a.createElement(i.ScreenSpinner,null):null},r.a.createElement(i.Panel,{id:"home"},r.a.createElement(i.PanelHeader,null,"\u041a\u0442\u043e?"),r.a.createElement(i.FormLayout,{style:{background:"white"}},"shared"===f?r.a.createElement(i.FormStatus,{title:"\u0423\u0440\u0430!",style:{background:"#528bcc",color:"white"}},"\u041c\u044b \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b\u0438 \u0442\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e!"):null,"sharingError"===f?r.a.createElement(i.FormStatus,{title:"\u0423\u043f\u0441...",state:"error"},"\u041c\u044b \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0432\u043e\u0439 \u0442\u043e\u043a\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e..."):null,"error"===f?r.a.createElement(i.FormStatus,{title:"\u041e\u0448\u0438\u0431\u043a\u0430!",state:"error"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430..."):null,r.a.createElement(i.Input,{top:"\u0418\u043c\u044f \u0442\u043e\u0433\u043e, \u043a\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442",value:o,onChange:function(e){return l(e.currentTarget.value.length<=16?e.currentTarget.value:o)}}),r.a.createElement(i.Input,{top:"\u0422\u043e, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442 \u0447\u0435\u043b\u043e\u0432\u0435\u043a",value:m,onChange:function(e){return d(e.currentTarget.value.length<=16?e.currentTarget.value:m)}})),r.a.createElement(i.FixedLayout,{vertical:"bottom",style:{margin:15,paddingRight:30}},r.a.createElement(i.Button,{size:"xl",onClick:function(){v("making"),function(e,t,a){var r=document.createElement("canvas");r.width=1080,r.height=1920;var o=r.getContext("2d");o.textAlign="center",o.fillStyle="#FFFFFF";var l=new Image;l.onload=function(){o.drawImage(l,0,0),o.font="96px Arial Black",o.fillText(e,540,1133),o.font="68px Arial",o.fillText(t,540,1494),a(r.toDataURL())},l.src=n(340)}(o,m,function(e){c.a.send("VKWebAppGetAuthToken",{app_id:6999640,scope:"stories"}).then(function(t){var n=t.data.access_token;c.a.send("VKWebAppCallAPIMethod",{method:"stories.getPhotoUploadServer",params:{access_token:n,add_to_news:1,link_text:"open",link_url:"https://vk.com/app6999640",v:"5.95"}}).then(function(t){var n=t.data.response.upload_url,a=new FormData;a.append("file",function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,l=new Uint8Array(o);o--;)l[o]=r.charCodeAt(o);return new File([l],t,{type:a})}(e,"story.png")),fetch("https://cors-anywhere.herokuapp.com/"+n,{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){return e.error?v("error"):v("shared")}).catch(console.error)}).catch(console.error)}).catch(function(){return v("sharingError")})})}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438")),r.a.createElement(i.Group,null,r.a.createElement(i.Div,null,"Made by Nikitos"))))};n(341);c.a.send("VKWebAppInit",{}),l.a.render(r.a.createElement(s,null),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.2f1b4edb.chunk.js.map